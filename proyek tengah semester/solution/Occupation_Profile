{"cells":[{"cell_type":"code","execution_count":null,"metadata":{"id":"8ZJ0k6EIOnqH"},"outputs":[],"source":["import pandas as pd\n","import numpy as np\n","\n","from sklearn.feature_extraction.text import CountVectorizer\n","from sklearn.model_selection import cross_validate\n","from sklearn.metrics import confusion_matrix\n","\n","import warnings\n","warnings.filterwarnings(\"ignore\")"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"background_save":true,"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2349,"status":"ok","timestamp":1650198660497,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"3PdeLAj8S8F7","outputId":"765c24bc-68bd-4c90-b00e-b3a16352a3ba"},"outputs":[{"name":"stdout","output_type":"stream","text":["Mounted at /content/drive\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"background_save":true},"id":"0O84piWPV_xK"},"outputs":[],"source":["train_occupation = pd.read_excel(\"/content/drive/Shareddrives/tk1-anamedsos/df_training_labeled_structured.xlsx\")"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":22,"status":"ok","timestamp":1650198664583,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"3Um6nA90Yz9B","outputId":"2bcb3ed1-534b-4394-a002-be6d62a353b4"},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","RangeIndex: 10867 entries, 0 to 10866\n","Data columns (total 12 columns):\n"," #   Column           Non-Null Count  Dtype         \n","---  ------           --------------  -----         \n"," 0   created_at       10867 non-null  datetime64[ns]\n"," 1   description      8222 non-null   object        \n"," 2   followers_count  10867 non-null  float64       \n"," 3   following_count  10867 non-null  float64       \n"," 4   gender           10867 non-null  object        \n"," 5   listed_count     10867 non-null  float64       \n"," 6   location         7097 non-null   object        \n"," 7   name             10865 non-null  object        \n"," 8   occupation       10867 non-null  object        \n"," 9   tweet_count      10867 non-null  float64       \n"," 10  username         10867 non-null  object        \n"," 11  verified         10867 non-null  float64       \n","dtypes: datetime64[ns](1), float64(5), object(6)\n","memory usage: 1018.9+ KB\n"]}],"source":["train_occupation.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":17,"status":"ok","timestamp":1650198664583,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"QahURnDkZINl","outputId":"4fcd46a1-40a0-42fa-ae6c-286f37c30783"},"outputs":[{"data":{"text/plain":["created_at          3345\n","description         8083\n","followers_count     3383\n","following_count     2200\n","gender                 3\n","listed_count         496\n","location            3163\n","name               10678\n","occupation            11\n","tweet_count         7195\n","username           10867\n","verified               2\n","dtype: int64"]},"execution_count":182,"metadata":{},"output_type":"execute_result"}],"source":["train_occupation.nunique()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"HsgD6FodY6r_"},"outputs":[],"source":["train_occ = train_occupation.drop(['created_at', 'username','gender', 'description', 'location', 'name'], axis=1)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"7PPutJw1a9co"},"outputs":[],"source":["train_occ = train_occ[train_occ['occupation'] != '-']"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":16,"status":"ok","timestamp":1650198664584,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"E3qHIiycZmtj","outputId":"a0c68992-f912-48f4-c7c1-887a1889c9e3"},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","Int64Index: 1223 entries, 0 to 10866\n","Data columns (total 6 columns):\n"," #   Column           Non-Null Count  Dtype  \n","---  ------           --------------  -----  \n"," 0   followers_count  1223 non-null   float64\n"," 1   following_count  1223 non-null   float64\n"," 2   listed_count     1223 non-null   float64\n"," 3   occupation       1223 non-null   object \n"," 4   tweet_count      1223 non-null   float64\n"," 5   verified         1223 non-null   float64\n","dtypes: float64(5), object(1)\n","memory usage: 66.9+ KB\n"]}],"source":["train_occ.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"bkDNOx7VaNUm"},"outputs":[],"source":["train_numeric = train_occ.select_dtypes('number')\n","train_categorical = train_occ.select_dtypes('object')"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":13,"status":"ok","timestamp":1650198664584,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"7YN2hES3ZnyV","outputId":"95b00650-d1b8-4098-ed83-30ded4cb2fd8"},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","Int64Index: 1223 entries, 0 to 10866\n","Data columns (total 5 columns):\n"," #   Column           Non-Null Count  Dtype  \n","---  ------           --------------  -----  \n"," 0   followers_count  1223 non-null   float64\n"," 1   following_count  1223 non-null   float64\n"," 2   listed_count     1223 non-null   float64\n"," 3   tweet_count      1223 non-null   float64\n"," 4   verified         1223 non-null   float64\n","dtypes: float64(5)\n","memory usage: 57.3 KB\n"]}],"source":["train_numeric.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":12,"status":"ok","timestamp":1650198664585,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"aDwAJ3slbq38","outputId":"d53a6fce-e3ea-4142-f2b8-1ab8fce93165"},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","Int64Index: 1223 entries, 0 to 10866\n","Data columns (total 1 columns):\n"," #   Column      Non-Null Count  Dtype \n","---  ------      --------------  ----- \n"," 0   occupation  1223 non-null   object\n","dtypes: object(1)\n","memory usage: 19.1+ KB\n"]}],"source":["train_categorical.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11,"status":"ok","timestamp":1650198664585,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"Le4gKkAJaVV0","outputId":"a0869620-0bbc-4f65-e156-9be5d6c67eeb"},"outputs":[{"data":{"text/plain":["occupation    10\n","dtype: int64"]},"execution_count":189,"metadata":{},"output_type":"execute_result"}],"source":["train_categorical.nunique()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Q7VQpbhQax9J"},"outputs":[],"source":["labels = train_categorical['occupation']"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":9,"status":"ok","timestamp":1650198664585,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"zJpiL-Zlblga","outputId":"eb333f2e-7b6e-4914-aa06-264b20ac391a"},"outputs":[{"data":{"text/plain":["1223"]},"execution_count":191,"metadata":{},"output_type":"execute_result"}],"source":["len(labels)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":300},"executionInfo":{"elapsed":8,"status":"ok","timestamp":1650198664585,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"c6dxxY46cAJf","outputId":"94d0943e-f40a-4863-b32e-7f07a92b85b1"},"outputs":[{"data":{"text/html":["\n","  <div id=\"df-9037ae48-7e15-4ee0-9b10-87d9d50038df\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>followers_count</th>\n","      <th>following_count</th>\n","      <th>listed_count</th>\n","      <th>tweet_count</th>\n","      <th>verified</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>count</th>\n","      <td>1.223000e+03</td>\n","      <td>1223.000000</td>\n","      <td>1223.00000</td>\n","      <td>1223.000000</td>\n","      <td>1223.000000</td>\n","    </tr>\n","    <tr>\n","      <th>mean</th>\n","      <td>2.664913e+05</td>\n","      <td>994.134096</td>\n","      <td>748.25511</td>\n","      <td>21021.506950</td>\n","      <td>0.096484</td>\n","    </tr>\n","    <tr>\n","      <th>std</th>\n","      <td>2.411915e+06</td>\n","      <td>10324.240956</td>\n","      <td>8344.24627</td>\n","      <td>41859.808306</td>\n","      <td>0.295375</td>\n","    </tr>\n","    <tr>\n","      <th>min</th>\n","      <td>0.000000e+00</td>\n","      <td>0.000000</td>\n","      <td>0.00000</td>\n","      <td>0.000000</td>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>25%</th>\n","      <td>4.485000e+02</td>\n","      <td>154.500000</td>\n","      <td>1.00000</td>\n","      <td>2436.500000</td>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>50%</th>\n","      <td>3.922000e+03</td>\n","      <td>340.000000</td>\n","      <td>11.00000</td>\n","      <td>9093.000000</td>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>75%</th>\n","      <td>4.517300e+04</td>\n","      <td>634.500000</td>\n","      <td>73.50000</td>\n","      <td>24643.000000</td>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>max</th>\n","      <td>7.936502e+07</td>\n","      <td>301883.000000</td>\n","      <td>182752.00000</td>\n","      <td>630409.000000</td>\n","      <td>1.000000</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-9037ae48-7e15-4ee0-9b10-87d9d50038df')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-9037ae48-7e15-4ee0-9b10-87d9d50038df button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-9037ae48-7e15-4ee0-9b10-87d9d50038df');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "],"text/plain":["       followers_count  following_count  listed_count    tweet_count  \\\n","count     1.223000e+03      1223.000000    1223.00000    1223.000000   \n","mean      2.664913e+05       994.134096     748.25511   21021.506950   \n","std       2.411915e+06     10324.240956    8344.24627   41859.808306   \n","min       0.000000e+00         0.000000       0.00000       0.000000   \n","25%       4.485000e+02       154.500000       1.00000    2436.500000   \n","50%       3.922000e+03       340.000000      11.00000    9093.000000   \n","75%       4.517300e+04       634.500000      73.50000   24643.000000   \n","max       7.936502e+07    301883.000000  182752.00000  630409.000000   \n","\n","          verified  \n","count  1223.000000  \n","mean      0.096484  \n","std       0.295375  \n","min       0.000000  \n","25%       0.000000  \n","50%       0.000000  \n","75%       0.000000  \n","max       1.000000  "]},"execution_count":192,"metadata":{},"output_type":"execute_result"}],"source":["train_numeric.describe()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"K3EHo_nocJr7"},"outputs":[],"source":["from sklearn.preprocessing import StandardScaler"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"U2ShILCIcMqW"},"outputs":[],"source":["scaler = StandardScaler()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"GBMiY9lYbw2K"},"outputs":[],"source":["X = pd.concat([train_numeric], axis=1)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":5,"status":"ok","timestamp":1650198665076,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"YGpoLaX-cXq-","outputId":"5cce3a65-97af-460e-954f-883456eaafba"},"outputs":[{"data":{"text/plain":["(1223, 5)"]},"execution_count":196,"metadata":{},"output_type":"execute_result"}],"source":["X.shape"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":5,"status":"ok","timestamp":1650198665077,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"6Baq3D9ycYE1","outputId":"4bec62c3-7322-463f-9443-325846993b19"},"outputs":[{"data":{"text/plain":["(1223,)"]},"execution_count":197,"metadata":{},"output_type":"execute_result"}],"source":["labels.shape"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zY3p_TzdcjSl"},"outputs":[],"source":["from sklearn.model_selection import train_test_split"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"djOM45IxcpJa"},"outputs":[],"source":["X_train, X_val, y_train, y_val = train_test_split(X, labels, test_size=0.3, random_state=123)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"1ejJq8OIc0j0"},"outputs":[],"source":["X_train = scaler.fit_transform(X_train)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Xlr_60rRc5hi"},"outputs":[],"source":["X_val = scaler.transform(X_val)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"_ghFeBoBgPlt"},"outputs":[],"source":["from collections import Counter\n","from imblearn.over_sampling import SMOTE \n","\n","sm = SMOTE(random_state=42)\n","X_train, y_train = sm.fit_resample(X_train, y_train)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":416,"status":"ok","timestamp":1650198746220,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"-m5L6oIqgoGB","outputId":"16565a7a-54b2-4004-a6c4-729728bf6c8c"},"outputs":[{"name":"stdout","output_type":"stream","text":["Resampled dataset shape Counter({'sosial kemasyarakatan': 415, 'hiburan': 415, 'pendidikan dan penelitian': 415, 'sains dan teknologi': 415, 'hospitality & tourism': 415, 'kesehatan': 415, 'seni': 415, 'olahraga': 415, 'ekonomi dan bisnis': 415, 'media': 415})\n"]}],"source":["print('Resampled dataset shape %s' % Counter(y_train))"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1254,"status":"ok","timestamp":1650198754789,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"Ac7f6_kuc92i","outputId":"f50b7b3d-eeb9-475f-9078-82cdf3888b78"},"outputs":[{"data":{"text/plain":["RandomForestClassifier(class_weight='balanced')"]},"execution_count":206,"metadata":{},"output_type":"execute_result"}],"source":["from sklearn.ensemble import RandomForestClassifier\n","from sklearn.metrics import classification_report\n","\n","\n","rf = RandomForestClassifier(class_weight='balanced')\n","rf.fit(X_train, y_train)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":310,"status":"ok","timestamp":1650198756678,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"lxgMhtxadarp","outputId":"e51c375d-2c79-456a-be6f-f78e3802309a"},"outputs":[{"name":"stdout","output_type":"stream","text":["                           precision    recall  f1-score   support\n","\n","       ekonomi dan bisnis       0.14      0.21      0.16        24\n","                  hiburan       0.76      0.47      0.58       188\n","    hospitality & tourism       0.00      0.00      0.00         5\n","                kesehatan       0.07      0.25      0.11         4\n","                    media       0.18      0.33      0.24         6\n","                 olahraga       0.05      0.20      0.08         5\n","pendidikan dan penelitian       0.17      0.27      0.21        22\n","      sains dan teknologi       0.28      0.38      0.32        52\n","                     seni       0.00      0.00      0.00         4\n","    sosial kemasyarakatan       0.24      0.18      0.20        57\n","\n","                 accuracy                           0.37       367\n","                macro avg       0.19      0.23      0.19       367\n","             weighted avg       0.49      0.37      0.41       367\n","\n"]}],"source":["y_pred_rf = rf.predict(X_val)\n","print(classification_report(y_val, y_pred_rf))"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1725,"status":"ok","timestamp":1650198763987,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"z3FURAhOdrmS","outputId":"0136d442-7c0f-44d7-a34d-2007e145dbae"},"outputs":[{"data":{"text/plain":["SVC(class_weight='balanced')"]},"execution_count":208,"metadata":{},"output_type":"execute_result"}],"source":["from sklearn.svm import SVC\n","\n","svc = SVC(kernel=\"rbf\", class_weight=\"balanced\")\n","svc.fit(X_train, y_train)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":361,"status":"ok","timestamp":1650198787221,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"SK5WmWT4gtjK","outputId":"b41bc2ea-847c-4f6b-aeb9-d8ee6c0677a3"},"outputs":[{"name":"stdout","output_type":"stream","text":["                           precision    recall  f1-score   support\n","\n","       ekonomi dan bisnis       0.33      0.08      0.13        24\n","                  hiburan       0.83      0.05      0.10       188\n","    hospitality & tourism       0.02      0.20      0.04         5\n","                kesehatan       0.00      0.00      0.00         4\n","                    media       0.03      0.67      0.06         6\n","                 olahraga       0.01      0.20      0.02         5\n","pendidikan dan penelitian       0.00      0.00      0.00        22\n","      sains dan teknologi       0.00      0.00      0.00        52\n","                     seni       0.00      0.00      0.00         4\n","    sosial kemasyarakatan       0.27      0.21      0.24        57\n","\n","                 accuracy                           0.08       367\n","                macro avg       0.15      0.14      0.06       367\n","             weighted avg       0.49      0.08      0.10       367\n","\n"]}],"source":["y_pred = svc.predict(X_val)\n","print(classification_report(y_val, y_pred))"]},{"cell_type":"markdown","metadata":{"id":"ERl1l2cGr_Cq"},"source":["Modeling dengan data unstructured"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"SoBW5S8Sr49I"},"outputs":[],"source":[""]},{"cell_type":"markdown","metadata":{"id":"Pa12pscHd0qq"},"source":["Testing"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"N3s_3EI7dz2l"},"outputs":[],"source":["test_occupation = pd.read_excel(\"/content/drive/Shareddrives/tk1-anamedsos/df_testing_structured.xlsx\")"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":4,"status":"ok","timestamp":1650198832937,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"J-WqWpPyeGTp","outputId":"a8d8f70a-14f3-47ca-8672-9db5c74ef670"},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","RangeIndex: 1054 entries, 0 to 1053\n","Data columns (total 11 columns):\n"," #   Column           Non-Null Count  Dtype         \n","---  ------           --------------  -----         \n"," 0   id               1054 non-null   float64       \n"," 1   created_at       1054 non-null   datetime64[ns]\n"," 2   description      893 non-null    object        \n"," 3   followers_count  1054 non-null   float64       \n"," 4   following_count  1054 non-null   float64       \n"," 5   listed_count     1054 non-null   float64       \n"," 6   location         753 non-null    object        \n"," 7   name             1054 non-null   object        \n"," 8   tweet_count      1054 non-null   float64       \n"," 9   username         1054 non-null   object        \n"," 10  verified         1054 non-null   float64       \n","dtypes: datetime64[ns](1), float64(6), object(4)\n","memory usage: 90.7+ KB\n"]}],"source":["test_occupation.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"DurG5J0MeJeL"},"outputs":[],"source":["test_occ = test_occupation.drop(['id', 'created_at', 'username', 'description', 'location', 'name'], axis=1)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1,"status":"ok","timestamp":1650198834328,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"hmFkRX1YeTCd","outputId":"61b2beb2-ee23-4a7f-b145-00be3fa4f3b7"},"outputs":[{"name":"stdout","output_type":"stream","text":["<class 'pandas.core.frame.DataFrame'>\n","RangeIndex: 1054 entries, 0 to 1053\n","Data columns (total 5 columns):\n"," #   Column           Non-Null Count  Dtype  \n","---  ------           --------------  -----  \n"," 0   followers_count  1054 non-null   float64\n"," 1   following_count  1054 non-null   float64\n"," 2   listed_count     1054 non-null   float64\n"," 3   tweet_count      1054 non-null   float64\n"," 4   verified         1054 non-null   float64\n","dtypes: float64(5)\n","memory usage: 41.3 KB\n"]}],"source":["test_occ.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"grgw2culfMOV"},"outputs":[],"source":["X_test = scaler.transform(test_occ)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3,"status":"ok","timestamp":1650198837174,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"bf47z4mneVKX","outputId":"7fe4c9bc-7f85-4e45-8f6b-cfcc8d6d620e"},"outputs":[{"data":{"text/plain":["(1054, 5)"]},"execution_count":227,"metadata":{},"output_type":"execute_result"}],"source":["X_test.shape"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"IbYvPOjWfSpD"},"outputs":[],"source":["y_test = rf.predict(X_test)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2,"status":"ok","timestamp":1650198839058,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"ok_5qokffaL4","outputId":"75993d39-3bd2-4de1-acff-01288571fdb0"},"outputs":[{"data":{"text/plain":["array(['hiburan', 'sosial kemasyarakatan', 'ekonomi dan bisnis', ...,\n","       'sains dan teknologi', 'kesehatan', 'pendidikan dan penelitian'],\n","      dtype=object)"]},"execution_count":229,"metadata":{},"output_type":"execute_result"}],"source":["y_test"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Uu4UEHorfa-S"},"outputs":[],"source":["df_test = pd.DataFrame(y_test)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"TXcY_YnffjQa"},"outputs":[],"source":["df_test.index = range(1,len(df_test)+1)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":423},"executionInfo":{"elapsed":3,"status":"ok","timestamp":1650198841770,"user":{"displayName":"Daniel Syahputra Purba","userId":"16062251870246311539"},"user_tz":-420},"id":"lIj_VhRrflAF","outputId":"9eaaa807-56d4-4443-a38f-ed42262fabf5"},"outputs":[{"data":{"text/html":["\n","  <div id=\"df-f689c9cb-1479-44da-b350-0b702b6dd01b\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>0</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>1</th>\n","      <td>hiburan</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>sosial kemasyarakatan</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>ekonomi dan bisnis</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>hiburan</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>sosial kemasyarakatan</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>1050</th>\n","      <td>hiburan</td>\n","    </tr>\n","    <tr>\n","      <th>1051</th>\n","      <td>olahraga</td>\n","    </tr>\n","    <tr>\n","      <th>1052</th>\n","      <td>sains dan teknologi</td>\n","    </tr>\n","    <tr>\n","      <th>1053</th>\n","      <td>kesehatan</td>\n","    </tr>\n","    <tr>\n","      <th>1054</th>\n","      <td>pendidikan dan penelitian</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>1054 rows × 1 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-f689c9cb-1479-44da-b350-0b702b6dd01b')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-f689c9cb-1479-44da-b350-0b702b6dd01b button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-f689c9cb-1479-44da-b350-0b702b6dd01b');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "],"text/plain":["                              0\n","1                       hiburan\n","2         sosial kemasyarakatan\n","3            ekonomi dan bisnis\n","4                       hiburan\n","5         sosial kemasyarakatan\n","...                         ...\n","1050                    hiburan\n","1051                   olahraga\n","1052        sains dan teknologi\n","1053                  kesehatan\n","1054  pendidikan dan penelitian\n","\n","[1054 rows x 1 columns]"]},"execution_count":232,"metadata":{},"output_type":"execute_result"}],"source":["df_test"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"FBpEQWUmfmbe"},"outputs":[],"source":["df_test.to_csv(\"result_occ2.csv\", header=False)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5yegO--Sfr72"},"outputs":[],"source":[""]}],"metadata":{"colab":{"collapsed_sections":[],"name":"Occupation_Profile","provenance":[],"authorship_tag":"ABX9TyM86ThLPURoJWOLRznPvRAN"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}